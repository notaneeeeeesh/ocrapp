import{g as v,h as D,i as h,c as a,b as e,j as i,F as C,k as S,l as U,o as s,t as B,m as I,v as R}from"./index-BQUyCr_P.js";const V={class:"file-container"},F=["src"],w={key:0,class:"flex flex-wrap gap-5"},E=["onUpdate:modelValue"],T={__name:"Docket",setup(L){const u=v({mime:"",content:""}),c=v(),l=v(),o=v({fleet:"",reg_no:"",make:"",purpose:"",out_to:"",out_datetime:"",out_kms:"",out_driver:"",in_from:"",in_kms:"",in_datetime:"",in_driver:"",description:"",remarks:""}),p=r=>{var t=r.target.files[0];t&&U(t).then(n=>{n=n.split(","),c.value=n,u.value.mime=n[0],u.value.content=n[1]})},g=()=>{f.submit().then(r=>{for(const t in r)o.value[t]=r[t];l.value=o.value})},k=()=>{if(!o.value){console.log("empty");return}b.insert.submit(o.value),m()},m=()=>{u.value={mime:"",content:""},c.value="",l.value="",o.value={fleet:"",reg_no:"",make:"",purpose:"",out_to:"",out_datetime:"",out_kms:"",out_driver:"",in_from:"",in_kms:"",in_datetime:"",in_driver:"",description:"",remarks:""}},_=()=>{console.log("Image Data:"),console.log(u.value),console.log("Receive Data:"),console.log(o.value),console.log("Unsaved Data:"),console.log(l.value)},f=D({url:"ocrapp.api.docket.getDocket",params:{str:u.value}}),x=()=>{o.value=l.value,console.log("Saved!")},b=h({doctype:"Docket",fields:["*"],auto:!0});return(r,t)=>(s(),a("div",null,[t[2]||(t[2]=e("h1",null,"Docket",-1)),e("div",null,[t[1]||(t[1]=e("h1",{class:"container"},"Upload Image",-1)),e("div",null,[e("div",V,[e("div",null,[e("form",null,[e("input",{type:"file",id:"media",accept:"image/png",onChange:t[0]||(t[0]=n=>p(n))},null,32)])])]),e("div",null,[c.value?(s(),a("img",{key:0,src:c.value},null,8,F)):i("",!0)]),e("button",{class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:g},"Send?"),e("button",{class:"bg-gray-500 rounded-2xl px-5 mt-2",onClick:_},"Print"),e("div",null,[l.value?(s(),a("div",w,[(s(!0),a(C,null,S(l.value,(n,d)=>(s(),a("div",{key:d},[e("p",null,B(d),1),I(e("input",{"onUpdate:modelValue":y=>l.value[d]=y,type:"text"},null,8,E),[[R,l.value[d]]])]))),128))])):i("",!0),o.value?(s(),a("button",{key:1,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:x},"Save?")):i("",!0),o.value?(s(),a("button",{key:2,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:k},"Submit?")):i("",!0),o.value?(s(),a("button",{key:3,class:"bg-red-300 rounded-2xl px-5 mt-5",onClick:m},"Clear?")):i("",!0)])])])]))}};export{T as default};
